<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Redirecting to ManhMusic</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
            background: #1a1a1a;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Redirecting to ManhMusic...</h1>
    <p>If you were redirected here by an OAuth provider, you will be forwarded automatically.</p>
    
    <script>
        (function () {
            // Root 404 handler for OAuth callbacks
            var pathname = window.location.pathname || '/';
            var hash = window.location.hash || '';
            var search = window.location.search || '';
            
            var hasOAuthParams = /access_token=|refresh_token=|code=/.test(hash + search);
            var base = '/manh-music/';
            var target;
            
            if (hasOAuthParams) {
                console.log('Root 404 detected OAuth params; redirecting to player...');
                target = window.location.origin + base + 'player.html' + hash + search;
            } else {
                // Regular 404, redirect to app home
                target = window.location.origin + base;
            }
            
            // Immediate redirect
            window.location.replace(target);
        })();
    </script>
</body>
</html>