<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ManhMusic - Redirect</title>
    <script>
        // Global 404 (repo root) handler for misdirected OAuth callbacks
        const hash = window.location.hash || '';
        const search = window.location.search || '';
        const pathname = window.location.pathname || '';
        const hasOAuthParams = /access_token=|refresh_token=|code=/.test(hash + search);
        const base = 'https://manhnd395.github.io/manh-music/';

        if (hasOAuthParams) {
            console.log('Root 404 detected OAuth params; normalizing path...');
            if (pathname === '/player.html') {
                window.location.replace(base + 'player.html' + search + hash);
            } else {
                window.location.replace(base + search + hash);
            }
        } else {
            window.location.replace(base);
        }
    </script>
</head>
<body>
    <div style="text-align: center; margin-top: 50px; font-family: Arial;">
        <h2>Redirecting...</h2>
        <p>If not redirected automatically, <a href="https://manhnd395.github.io/manh-music/">click here</a></p>
    </div>
</body>
</html>