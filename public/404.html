<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ManhMusic</title>
    <script>
        // Handle OAuth callback on wrong path, preserve search+hash
        const hash = window.location.hash || '';
        const search = window.location.search || '';
        const pathname = window.location.pathname || '';
        const hasOAuthParams = /access_token=|refresh_token=|code=/.test(hash + search);
        const base = 'https://manhnd395.github.io/manh-music/';

        if (hasOAuthParams) {
            if (pathname === '/player.html') {
                window.location.replace(base + 'player.html' + search + hash);
            } else {
                window.location.replace(base + search + hash);
            }
        } else {
            // Regular 404, redirect to home
            window.location.replace(base);
        }
    </script>
</head>
<body>
    <p>Redirecting...</p>
</body>
</html>